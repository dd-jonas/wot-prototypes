import{j as l,r as a,D as v,R as P,a as C}from"./vendor.b644d446.js";const w=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function c(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=c(t);fetch(t.href,r)}};w();const d={width:500,height:240},x=25,h=16,s=l.exports.jsx,u=l.exports.jsxs,f=l.exports.Fragment,N=({points:e})=>{const n=e.map((c,o)=>{if(o===0)return;const t=e[o-1],r=c.x-t.x,i=c.y-t.y;return{left:t.x+h/2,top:t.y+h/2,length:Math.sqrt(r**2+i**2),angle:r>=0?Math.atan(i/r)*(180/Math.PI):Math.atan(i/r)*(180/Math.PI)+180}}).slice(1);return s("div",{className:"points--lines",children:n.map((c,o)=>s("div",{className:"line",style:{left:`${c.left}px`,top:`${c.top}px`,width:`${c.length}px`,transform:`rotate(${c.angle}deg)`}},o))})},b=({point:e,onDrag:n,index:c,children:o})=>{const t=a.exports.useRef(null);return s(v,{nodeRef:t,position:e,bounds:"#canvas",onDrag:n,children:s("div",{ref:t,className:"point","data-index":c,children:o})})},R=({points:e,setPoints:n})=>{const c=(o,{x:t,y:r})=>{const i=+o.target.dataset.index;n(e.map((g,p)=>p===i?{x:t,y:r}:g))};return s("div",{className:"points--control",children:e.map((o,t)=>s(b,{point:o,index:t,onDrag:c,children:t%2==0?t/2+1:null},t))})};var j=(e,...n)=>{if(n.length<2||n.length>4)throw new Error("Expected 2, 3, or 4 points as input.");switch(n.length){case 2:return{x:(1-e)*n[0].x+e*n[1].x,y:(1-e)*n[0].y+e*n[1].y};case 3:return{x:(1-e)**2*n[0].x+2*e*(1-e)*n[1].x+e**2*n[2].x,y:(1-e)**2*n[0].y+2*e*(1-e)*n[1].y+e**2*n[2].y};case 4:return{x:(1-e)**3*n[0].x+3*e*(1-e)**2*n[1].x+3*e**2*(1-e)*n[2].x+e**3*n[3].x,y:(1-e)**3*n[0].y+3*e*(1-e)**2*n[1].y+3*e**2*(1-e)*n[2].y+e**3*n[3].y}}};const M=({point:e})=>s("div",{className:"point",style:{left:`${e.x}px`,top:`${e.y}px`}}),D=({points:e})=>{const c=e.reduce((o,t,r)=>(r%2==0?(r!==0&&o[o.length-1].push(t),r!==e.length-1&&o.push([t])):o[o.length-1].push(t),o),[]).flatMap(o=>[...new Array(x-1)].map((t,r)=>j((r+1)/x,...o)));return s("div",{className:"points--curve",children:c.map((o,t)=>s(M,{point:o},t))})},m=a.exports.createContext([]),S=({children:e})=>{const[n,c]=a.exports.useState([{x:50,y:50},{x:100,y:200},{x:230,y:110},{x:350,y:20},{x:450,y:220}]);return s(m.Provider,{value:{points:n,setPoints:c},children:e})},y=()=>a.exports.useContext(m),$=({scale:e})=>{const{points:n,setPoints:c}=y(),o=i=>({x:i.x*e,y:i.y*e}),t=i=>({x:i.x/e,y:i.y/e}),r=n.map(o);return u(f,{children:[s(N,{points:r}),s(D,{points:r}),s(R,{points:r,setPoints:i=>c(i.map(t))})]})},L=({dimensions:e})=>{const[n,c]=a.exports.useState(null),o=a.exports.useRef(null);return a.exports.useEffect(()=>{c(o.current.offsetWidth/e.width)},[]),s("div",{ref:o,id:"canvas",style:{aspectRatio:`${e.width/e.height}`},children:n?s($,{scale:n}):null})},E=()=>{const{setPoints:e}=y();return u(f,{children:[s("button",{className:"button-point",onClick:()=>{e(o=>{const t={x:d.width/2,y:d.height/2},r={x:t.x-(t.x-o[o.length-1].x)/2,y:t.y-(t.y-o[o.length-1].y)/2};return[...o,r,t]})},children:"+ Add"}),s("button",{className:"button-point",onClick:()=>{e(o=>o.length===1?o:o.slice(0,-2))},children:"- Remove"})]})},F=()=>s(S,{children:u("section",{className:"lightgrid",children:[s("h1",{children:"Dashboard lights"}),s(E,{}),s(L,{dimensions:d})]})});P.render(s(C.StrictMode,{children:s(F,{})}),document.getElementById("root"));
